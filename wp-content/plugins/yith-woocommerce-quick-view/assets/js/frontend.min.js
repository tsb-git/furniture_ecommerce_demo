jQuery(document).ready(function(o) {
    "use strict";
    var c, i, a, t, d, r, u, n, e, l;
    "undefined" != typeof yith_qv && (c = o(document).find("#yith-quick-view-modal"), i = c.find(".yith-quick-view-overlay"), a = c.find("#yith-quick-view-content"), t = c.find("#yith-quick-view-close"), d = c.find(".yith-wcqv-wrapper"), r = d.width(), u = d.height(), n = function() {
        var i = o(window).width(),
            t = o(window).height(),
            n = r < i - 60 ? r : i - 60,
            e = u < t - 120 ? u : t - 120;
        d.css({
            left: i / 2 - n / 2,
            top: t / 2 - e / 2,
            width: n + "px",
            height: e + "px"
        })
    }, o.fn.yith_quick_view = function() {
        o(document).off("click", ".yith-wcqv-button").on("click", ".yith-wcqv-button", function(i) {
            i.preventDefault();
            var i = o(this),
                t = i.data("product_id"),
                n = !1;
            "undefined" != typeof yith_qv.loader && (n = !0, i.block({
                message: null,
                overlayCSS: {
                    background: "#fff url(" + yith_qv.loader + ") no-repeat center",
                    opacity: .5,
                    cursor: "none"
                }
            }), c.hasClass("loading") || c.addClass("loading"), o(document).trigger("qv_loading")), e(i, t, n)
        })
    }, e = function(n, i, e) {
        o.ajax({
            url: yith_qv.ajaxurl,
            data: {
                action: "yith_load_product_quick_view",
                product_id: i,
                lang: yith_qv.lang,
                context: "frontend"
            },
            dataType: "json",
            type: "POST",
            success: function(i) {
                a.html(i.html);
                var t = a.find(".variations_form");
                t.each(function() {
                    o(this).wc_variation_form(), "undefined" != typeof o.fn.yith_wccl ? o(this).yith_wccl() : "undefined" != typeof o.yith_wccl && i.prod_attr && o.yith_wccl(i.prod_attr)
                }), t.trigger("check_variations"), t.trigger("reset_image"), "undefined" != typeof o.fn.wc_product_gallery && a.find(".woocommerce-product-gallery").each(function() {
                    o(this).wc_product_gallery()
                }), c.hasClass("open") || (c.removeClass("loading").addClass("open"), e && n.unblock()), o(document).trigger("qv_loader_stop")
            }
        })
    }, i.on("click", function(i) {
        l()
    }), o(document).keyup(function(i) {
        27 === i.keyCode && l()
    }), t.on("click", function(i) {
        i.preventDefault(), l()
    }), l = function() {
        c.removeClass("open").removeClass("loading"), a.html("")
    }, n(), o(window).on("resize", n), o.fn.yith_quick_view(), o(document).on("yith_infs_adding_elem yith-wcan-ajax-filtered", function() {
        o.fn.yith_quick_view()
    }))
});